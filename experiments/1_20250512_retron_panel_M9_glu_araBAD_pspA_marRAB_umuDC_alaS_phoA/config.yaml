# experiments/001_.../config.yaml
raw_data: "./raw_data"
plate_map: "./plate_map.xlsx"
output_dir: "./outputs/"

data_parser: synergy_h1_snapshot_and_timeseries

parameters:
  - OD600
  - CFP
  - YFP

custom_parameters:
  - name: "YFP/CFP"
    type: "ratio"
    parameters:
      - YFP
      - CFP
  - name: "CFP/OD600"
    type: "ratio"
    parameters:
      - CFP
      - OD600
  - name: "YFP/OD600"
    type: "ratio"
    parameters:
      - YFP
      - OD600

time_column: "Elapsed (h)"
blank_correction: "disregard"             # 'disregard', 'avg_subtract', 'median_substract'
overflow_action: "max"

use_short_genotype_names: true
short_genotype_names:
  - {'pDual-09-araBADp': 'araBADp'}
  - {'pDual-09-pspAp': 'pspAp'}
  - {'pDual-09-marRABp': 'marRABp'}
  - {'pDual-09-umuDCp': 'umuDCp'}
  - {'pDual-09-alaSp': 'alaSp'}
  - {'pDual-09-phoAp': 'phoAp'}
  - {'pDual-09-araBADp; pES-retron-30-msd[AraC]': 'araBADp - msd[AraC]'}
  - {'pDual-09-pspAp; pES-retron-35-msd[PspF]': 'pspAp - msd[PspF]'}
  - {'pDual-09-marRABp; pES-retron-32-msd[MarA]': 'marRABp - msd[MarA]'}
  - {'pDual-09-umuDCp; pES-retron-39-msd[LexA]': 'umuDCp - msd[LexA]'}
  - {'pDual-09-alaSp; pES-retron-40-msd[ArcA]': 'alaSp - msd[ArcA]'}
  - {'pDual-09-phoAp; pES-retron-41-msd[PhoB]': 'phoAp - msd[PhoB]'}

plots:
  - name: distributions
    module: distributions.py
    params:
      channels: [OD600, YFP, CFP, YFP/OD600, CFP/OD600, YFP/CFP]
    fig:
      seaborn_style: "ticks"
      palette: "colorblind"
      figsize: [8, 6]
      dpi: 300


  - name: time_series_grouped
    module: time_series.py
    subplots: "group"                         # one panel per group
    params:
      x: "time"
      y: [OD600, YFP, CFP, YFP/OD600, CFP/OD600, YFP/CFP]
      hue: "treatment"
      groupby_col: "genotype"               # column to group on
    groups:
      - { AraC-targeting retron: ["araBADp", "araBADp - msd[AraC]"] }
      - { PspF-targeting retron: ["pspAp", "pspAp - msd[PspF]"] }
      - { MarA-targeting retron: ["marRABp", "marRABp - msd[MarA]"] }
      - { LexA-targeting retron: ["umuDCp", "umuDCp - msd[LexA]"] }
      - { ArcA-targeting retron: ["alaSp", "alaSp - msd[ArcA]"] }
      - { PhoA-targeting retron: ["phoAp", "phoAp - msd[PhoB]"] }

    fig:
      figsize: [10, 6]
      dpi: 300


  - name: grouped_barplot_snapshot
    module: barplot_snapshot.py
    params:
      # xâ€‘axis is the genotype string
      x: "genotype"
      # you can pass either a single Y or a list of Ys;
      # if you pass a list, one barplot is created per Y
      y: [OD600, YFP/OD600]
      hue: "treatment"
      # snapshot time in hours; picks the closest available
      time: 14
    groups:
      - { AraC-targeting retron: ["araBADp", "araBADp - msd[AraC]"] }
      - { PspF-targeting retron: ["pspAp", "pspAp - msd[PspF]"] }
      - { MarA-targeting retron: ["marRABp", "marRABp - msd[MarA]"] }
      - { LexA-targeting retron: ["umuDCp", "umuDCp - msd[LexA]"] }
      - { ArcA-targeting retron: ["alaSp", "alaSp - msd[ArcA]"] }
      - { PhoB-targeting retron: ["phoAp", "phoAp - msd[PhoB]"] }
    fig:
      figsize: [10, 6]
      dpi: 300